Armazenamento na Nuvem com Amazon EBS e S3

1) Vis√£o Geral
- Amazon S3 (Simple Storage Service): armazenamento de objetos, acess√≠vel via HTTP, altamente dur√°vel, escal√°vel e econ√¥mico. Ideal para arquivos, backups, sites est√°ticos, data lakes e arquivamento.
- Amazon EBS (Elastic Block Store): armazenamento em blocos, anexado a inst√¢ncias EC2. Funciona como um disco virtual para sistemas operacionais, bancos de dados e aplica√ß√µes com baixa lat√™ncia.

2) Amazon S3 - Caracter√≠sticas
- Tipo: Object storage (dados + metadata + key).
- Durabilidade: 99.999999999% (11 9‚Äôs).
- Consist√™ncia: Strong consistency para PUT/GET/LIST.
- Classes de armazenamento: Standard, Intelligent-Tiering, Standard-IA, OneZone-IA, Glacier (arquivamento).
- Recursos: versionamento, lifecycle rules, bucket policies, presigned URLs, replica√ß√£o entre regi√µes, eventos (S3 + Lambda).
- Casos de uso: sites est√°ticos, distribui√ß√£o de conte√∫do, backups, arquivamento, data lake.

3) Amazon EBS - Caracter√≠sticas
- Tipo: Block storage (volumes vistos como discos pela EC2).
- Escopo: limitado a uma Availability Zone (AZ).
- Tipos de volume:
  - gp3 (SSD uso geral, at√© 16.000 IOPS, custo otimizado).
  - gp2 (legado, IOPS dependem do tamanho).
  - io2/io1 (Provisioned IOPS, para bancos cr√≠ticos).
  - st1/sc1 (HDD otimizados para throughput).
- Snapshots: backups incrementais, armazenados de forma dur√°vel (internamente no S3).
- Recursos: criptografia KMS, redimensionamento din√¢mico, multi-attach (io1/io2), replica√ß√£o via snapshots.

4) Compara√ß√£o S3 vs EBS
- Acesso: S3 via API (HTTP), EBS via bloco/dispositivo.
- Lat√™ncia: S3 maior, EBS baixa.
- Escopo: S3 global/multi-AZ, EBS restrito √† AZ.
- Casos de uso: S3 para arquivos/arquivamento, EBS para bancos de dados e SO.
- Custos: S3 cobra por GB + requisi√ß√µes + transfer√™ncia; EBS cobra por GB + provisionamento de IOPS/throughput.

5) Quando usar
- EBS: bancos de dados, SOs, aplica√ß√µes cr√≠ticas que exigem baixa lat√™ncia.
- S3: backup, data lake, arquivamento, conte√∫do est√°tico.
- Combina√ß√£o comum: banco em EBS com backups de snapshots salvos em S3.

6) Performance
- EBS gp3 permite separar tamanho de disco de IOPS/throughput.
- S3 escala automaticamente, mas boas pr√°ticas incluem distribuir chaves de objetos e usar CloudFront para lat√™ncia global.

7) Seguran√ßa
- S3: criptografia SSE-S3, SSE-KMS, ACLs, policies, VPC endpoints.
- EBS: criptografia KMS, controle de acesso via IAM.

8) Custos
- S3: otimizar com Intelligent-Tiering, lifecycle policies e Glacier para arquivamento.
- EBS: dimensionar volumes corretamente, apagar snapshots antigos, escolher gp3 em vez de gp2 quando poss√≠vel.

9) Exemplos CLI
# Criar bucket S3 e enviar arquivo
aws s3 mb s3://meu-bucket-exemplo --region us-east-1
aws s3 cp arquivo.jpg s3://meu-bucket-exemplo/pasta/arquivo.jpg

# Criar volume EBS e anexar √† EC2
aws ec2 create-volume --size 100 --availability-zone us-east-1a --volume-type gp3
aws ec2 attach-volume --volume-id vol-0123456789abcdef0 --instance-id i-0abc123def456 --device /dev/sdf


* Classes de armazenamento do Amazon S3, organizadas pelo n√≠vel de frequ√™ncia de acesso dos dados:

Frequ√™ncia de acesso, quando passe de 90 dias, passa a ser um acesso que n√£o √© t√£o frequente. Acima de 1 ano j√° entra no glacier.

üì¶ Classes de Armazenamento do Amazon S3

üîπ 1. S3 Standard

Uso geral, acesso frequente.
Alta durabilidade (11 9‚Äôs) e disponibilidade.
Lat√™ncia baixa e throughput alto.
Ideal para dados acessados diariamente (aplica√ß√µes, sites, arquivos ativos).

üîπ 2. S3 Intelligent-Tiering

Move automaticamente os objetos entre camadas de custo (frequente ‚Üî infrequente) com base no uso.
N√£o tem impacto de performance.
Bom quando n√£o sabemos o padr√£o de acesso (√†s vezes acessa muito, √†s vezes quase nunca).
Custa um pouco mais pelo monitoramento, mas reduz custos automaticamente.

üîπ 3. S3 Standard-IA (Infrequent Access)

Baixo custo para dados acessados raramente, mas ainda dispon√≠veis quando precisar.
Cobra mais caro para recuperar (GET).
Indicado para backups de curto prazo ou arquivos que quase n√£o mudam.

üîπ 4. S3 One Zone-IA

Parecido com o Standard-IA, mas os dados ficam somente em uma Availability Zone (n√£o multi-AZ).
Mais barato, mas com menos redund√¢ncia.
Bom para dados que podem ser recriados (ex.: c√≥pias secund√°rias, cache, conte√∫do n√£o cr√≠tico).

üîπ 5. S3 Glacier Instant Retrieval

Armazenamento de baixo custo com recupera√ß√£o instant√¢nea.
Para dados raramente acessados, mas que precisam estar dispon√≠veis sem esperar horas.
Ex.: documentos m√©dicos ou registros financeiros que precisam ser consultados rapidamente.

üîπ 6. S3 Glacier Flexible Retrieval (antigo S3 Glacier)

Custos muito baixos.
Recupera√ß√£o pode levar minutos a horas, dependendo da op√ß√£o (expedited, standard, bulk).
√ìtimo para arquivamento de longo prazo com acessos ocasionais.

üîπ 7. S3 Glacier Deep Archive

Classe mais barata do S3.
Recupera√ß√£o lenta (12 a 48 horas).
Projetada para arquivos que raramente ser√£o acessados (compliance, hist√≥rico de logs, arquivos fiscais que devem ser guardados por anos).


üéØ Resumindo:

Frequente ‚Üí S3 Standard
Uso incerto ‚Üí S3 Intelligent-Tiering
Pouco acesso, mas dispon√≠vel ‚Üí S3 Standard-IA / One Zone-IA
Arquivamento barato ‚Üí Glacier Instant / Flexible / Deep Archive